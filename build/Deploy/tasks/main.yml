---
# tasks file for Deploy
# 
    - name: Ensure Python3 is installed
      ansible.builtin.package:
        name: python3
        state: present

    - name: Ensure pip3 is installed
      ansible.builtin.command:
        cmd: python3 -m ensurepip --default-pip
      when: ansible_facts['distribution'] == 'MacOSX'

    - name: Ensure pip3 is installed on Linux
      ansible.builtin.package:
        name: python3-pip
        state: present
      when: ansible_facts['distribution'] != 'MacOSX'

    - name: Install Docker SDK for Python
      ansible.builtin.pip:
        name: docker
        state: present

    - name: Install Docker on Debian-based systems
      ansible.builtin.apt:
        name: docker.io
        state: present
        update_cache: yes
      when: ansible_facts['os_family'] == 'Debian'

    - name: Install Docker on RedHat-based systems
      ansible.builtin.yum:
        name: docker
        state: present
        update_cache: yes
      when: ansible_facts['os_family'] == 'RedHat'

    - name: Install Docker on macOS
      ansible.builtin.homebrew:
        name: docker
        state: present
      when: ansible_facts['distribution'] == 'MacOSX'
