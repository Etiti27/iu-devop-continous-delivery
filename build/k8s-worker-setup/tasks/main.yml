---
# tasks file for k8-worker-setup

- name: Fetch kubeadm join command from master
  fetch:
    src: /home/ubuntu/kubeadm_join_command.sh
    dest: /home/ubuntu/
    flat: yes

- name: Ensure the kubeadm join script is executable
  file:
    path: /home/ubuntu/kubeadm_join_command.sh
    mode: '0755'
    state: file

- name: Execute the kubeadm join command
  shell: |
        /home/ubuntu/kubeadm_join_command.sh
