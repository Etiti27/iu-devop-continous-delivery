---
# tasks file for DockerBuild
    # - name: Run Docker container
      # shell: |
        # apt update -y install
# /Users/obinna/Desktop/IU/DEVOP/build
    - name: Copy a configuration file
      copy:
        src: /Users/obinna/Desktop/IU/DEVOP
        dest: /etc/myapp/
        
 
    - name: Install Docker
      apt:
        name: docker.io
        state: present
      become: true

    - name: Install Ansible
      apt:
        name: ansible
        state: present
      become: true

   


    - name: Ensure Docker service is running
      service:
        name: docker
        state: started
        enabled: yes
      become: true

    # - name: Build Docker image
    - name: Build Docker image
      docker_image:
        path: "../../../"  # Directory containing the Dockerfile
        name: "{{docker_image_name}}"            # Name of the Docker image
        tag: latest             # Optional: specify a tag
        state: present  

      # community.docker.docker_image:
        # path: "{{ docker_build_context }}"
        # name: "{{ docker_image_name }}"
        # tag: "{{ docker_image_tag }}"
      # become: true
    # -name: Build Docker
    # shell:
      # docker build -t myapp:latest -f /path/to/Dockerfile /path/to/context


      
    - name: Run Docker container
      shell: |
        docker run -d --name {{docker_image_name}} -p 3000:3000 {{ docker_image_name }}:{{ docker_image_tag }}
